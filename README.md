# 梦想变装 (Dream Dress-Up)

一个让孩子拍照并实现梦想变装的 AI 应用。孩子可以拍照后输入自己的梦想（想成为什么样的人），然后 AI 会生成一张变装后的图片。

## 演示

![演示](./assets/demo.gif)

[Demo 地址](https://aishow.tu-zi.com/)

## 功能特点

### 核心功能
- 拍立得相机风格界面
- 实时摄像头拍照或上传照片
- 输入姓名（可选）和梦想描述
- AI 根据梦想生成变装图片
- 黑色胶片显影动画效果
- 历史记录保存在浏览器本地

### 自动/手动模式
- **手动模式**（默认）：拍照后填写梦想描述再生成
- **自动模式**：拍照后直接使用预设模板生成，无需填写
- 4 个内置自动模板：童话公主、超级英雄、魔法师、侠客
- 支持添加自定义自动模板

### 虚拟摄像头
- 在设置中开启，用上传的图片/视频代替真实摄像头
- 素材循环播放（图片 3 秒轮播，视频自动切换）
- 开关按钮与真实摄像头体验一致，带光圈动画
- 关闭再打开后，视频从上次位置继续播放

### 多张生成（抽卡模式）
- 可选择同时生成 1-4 张照片
- 胶片按顺序弹出，并行生成

### 风格模板
- 多种预设风格模板（真实风格、可爱涂鸦、卡通风格等）
- 点击相机 Logo 快速切换模板
- 长按 Logo 打开设置面板
- 支持自定义模板

### 照片管理
- 画板模式：照片散落在画板上，可自由拖拽
- 照片收纳：拖拽或点击收纳到 Gallery
- 全屏查看：点击照片查看原图与变装图对比
- 分享功能：生成精美分享卡片，支持系统分享和下载

### 数据管理
- 图片自动保存到 IndexedDB，避免 CDN 过期
- 数据导入导出（包含所有图片的完整备份）
- 相机位置持久化

### 音效系统
- 多种音效：快门、上传、胶片弹出、显影等
- 支持按类别开关
- 支持自定义音效文件替换

### 主题
- 深色/浅色模式自动切换（跟随系统设置）

## 技术栈

- React 19 + TypeScript 5.9
- Vite 7
- 纯 CSS3（无 UI 框架）
- IndexedDB（图片本地存储）
- Web Audio API（音效合成）

## 快速开始

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

访问 http://localhost:5173

### 构建生产版本

```bash
npm run build
```

## API 配置

首次使用时需要配置 API Key。可以通过以下方式配置：

1. 首次生成图片时会弹窗提示输入
2. 通过 URL 参数: `?apiKey=your-api-key`
3. 通过 URL 参数 (JSON): `?settings={"key":"your-api-key","url":"https://api.example.com/v1"}`

API Key 获取地址: https://api.tu-zi.com/token

[API Key 获取教程](https://wiki.tu-zi.com/s/8c61a536-7a59-4410-a5e2-8dab3d041958/doc/api-Q76TllZEfR)

## 使用说明

### 手动模式（默认）
1. 打开应用，允许摄像头权限
2. 点击拍照按钮拍摄照片，或点击底部箭头上传本地图片
3. 确认照片后，输入姓名（可选）和梦想描述
4. 选择生成张数（1-4 张）
5. 点击"确认并生成"，观看胶片弹出和显影动画
6. 生成的照片会自动出现在画板上

### 自动模式
1. 点击相机中央的「手动」按钮切换到「自动」
2. 点击相机 Logo 选择自动模板（童话公主/超级英雄/魔法师/侠客）
3. 拍照后直接生成，无需填写梦想描述

### 虚拟摄像头
1. 点击右上角齿轮打开设置
2. 开启「虚拟摄像头」
3. 点击相机下方「+」按钮上传图片或视频
4. 素材会在取景框中循环播放

## 界面特色

- **拍立得相机**: 复古相机造型，透明镜头显示实时画面
- **光圈动画**: 开关摄像头时模拟光圈开合效果
- **胶片动画**: 拍照后黑色胶片缓慢弹出，AI 生成完成后显影
- **画板模式**: 所有照片散落在画板上，可自由拖拽摆放
- **软木板画廊**: 全屏软木板背景，照片用红色图钉固定

## 注意事项

- 摄像头功能需要在 localhost 或 HTTPS 环境下使用
- 历史记录和图片保存在浏览器本地存储中
- 建议使用现代浏览器（Chrome、Firefox、Safari、Edge）

## License

MIT
