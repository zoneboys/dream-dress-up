# 梦想变装 (Dream Dress-Up) - 项目特点与功能

## 项目简介

「梦想变装」是一款面向儿童的 AI 变装应用，让孩子通过拍照并描述自己的梦想，AI 会生成一张变装后的精美图片。应用采用复古拍立得相机界面设计，配合胶片显影动画，带来独特的拍照体验。

---

## 核心特点

### 1. 复古拍立得相机界面
- 精致的拍立得相机造型设计
- 透明镜头实时显示摄像头画面
- 光圈开合动画（开关摄像头时）
- 胶片从相机弹出的真实感动画
- 胶片由黑变亮的显影效果

### 2. AI 智能变装
- 基于 Google Gemini 图像生成模型
- 保持人物面部特征的同时实现变装
- 支持自定义梦想描述，AI 智能理解并生成
- 多种预设风格：真实风格、可爱涂鸦、卡通风格

### 3. 画板式照片管理
- 所有生成的照片散落在软木板风格的画板上
- 照片可自由拖拽摆放
- 红色图钉固定照片的视觉效果
- 相机也可拖拽到画板任意位置

---

## 功能详情

### 拍照与上传
| 功能 | 说明 |
|------|------|
| 实时拍照 | 调用设备摄像头实时预览，一键拍照 |
| 图片上传 | 支持从相册上传本地图片 |
| 图片处理 | 保持原始比例，最大边限制 1024px |
| 闪光灯效果 | 拍照/上传时触发闪光动画 |

### 双模式生成

#### 手动模式（默认）
1. 拍照或上传照片
2. 输入姓名（可选）和梦想描述
3. 选择生成张数（1-4张）
4. 点击确认生成

#### 自动模式
1. 切换到自动模式
2. 选择预设模板
3. 拍照即自动生成，无需填写

**内置自动模板：**
- 👸 童话公主 - 迪士尼风格的公主/王子
- 🦸 超级英雄 - 漫威/DC风格的超级英雄
- 🧙 魔法师 - 哈利波特风格的巫师
- ⚔️ 侠客 - 中国古风武侠风格

### 多张生成（抽卡模式）
- 可选择同时生成 1-4 张照片
- 胶片按顺序弹出（间隔 600ms）
- 多张胶片位置自动错开
- 并行调用 API，独立显影

### 虚拟摄像头
- 用上传的图片/视频代替真实摄像头
- 图片 3 秒自动轮播
- 视频播完自动切换下一个
- 关闭再打开后，视频从上次位置继续
- 素材持久化存储

### 风格模板系统
- 3 种内置风格模板
- 点击相机 Logo 快速切换模板
- 长按 Logo 打开设置面板
- 支持添加自定义模板
- LCD 复古风格切换提示

### 照片收纳功能
- 拖拽照片到 Gallery 按钮收纳
- 点击照片右上角 📥 按钮收纳
- Gallery 显示已收纳数量角标
- 可将照片放回画板

### 照片查看与分享
- 点击照片查看原图与变装图对比
- 再次点击可全屏展示单张图片
- 生成精美分享卡片（含水印、日期）
- 支持系统分享 API 和直接下载

### 失败重试机制
- 生成失败的胶片保留原位
- 显示红色遮罩和「生成失败」提示
- 提供「重试」和「删除」按钮
- 重试使用原有参数重新生成

---

## 数据管理

### 本地存储
| 存储类型 | 内容 | 说明 |
|----------|------|------|
| localStorage | 历史记录元信息 | 照片ID、梦想描述、时间戳等 |
| localStorage | 相机位置 | 拖拽后的相机坐标 |
| localStorage | 自定义模板 | 用户添加的风格/自动模板 |
| localStorage | 音效设置 | 各类音效开关状态 |
| IndexedDB | 生成的图片 | 避免 CDN URL 过期 |
| IndexedDB | 原始照片 | 与生成图配对存储 |

### 数据导入导出
- 导出为 JSON 文件（含所有图片 base64）
- 支持完整数据恢复
- 显示存储统计信息

---

## 音效系统

### 音效类型
- 快门音效 - 拍照时触发
- 上传音效 - 上传图片时
- 开关摄像头 - 开启/关闭摄像头
- 模板切换 - 机械转盘声
- 确认音效 - 确认操作
- 完成音效 - 生成完成
- 错误音效 - 操作失败
- 胶片弹出 - 胶片弹出动画
- 显影音效 - 显影过程中

### 分类控制
默认开启：快门、相机、动画音效
支持按类别独立开关

### 自定义音效
将 mp3/wav/ogg 文件放入 `public/sounds/` 目录即可替换

---

## 技术亮点

### 前端架构
- **React 19** - 最新版本 React
- **TypeScript 5.9** - 完整类型支持
- **Vite 7** - 快速构建工具
- **纯 CSS3** - 无 UI 框架依赖，轻量高效

### 创新技术应用
- **Web Audio API** - 纯代码合成音效，无需音频文件
- **IndexedDB** - 大容量图片本地存储
- **Canvas** - 分享卡片动态绘制
- **CSS 变量** - 深浅色主题无缝切换
- **MediaDevices API** - 摄像头调用与视频帧捕获

### 用户体验
- 深色/浅色模式自动跟随系统
- 所有动画使用 CSS3 实现，流畅自然
- 响应式设计，适配不同屏幕
- 操作反馈即时，状态提示清晰

---

## 运行环境要求

- 现代浏览器（Chrome、Firefox、Safari、Edge）
- 摄像头功能需 localhost 或 HTTPS 环境
- 需配置 AI 图像生成 API Key

---

## 总结

「梦想变装」是一款将 AI 图像生成技术与创意交互设计相结合的应用，通过复古拍立得的界面风格和丰富的动画效果，为孩子们提供了一个将梦想可视化的魔法体验。技术上采用现代前端技术栈，无外部 UI 依赖，代码简洁高效。
